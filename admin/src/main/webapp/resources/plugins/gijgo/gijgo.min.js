var gj={widget:function(){this.xhr=null,this.generateGUID=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},this.mouseX=function(e){if(e){if(e.pageX)return e.pageX;if(e.clientX)return e.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft);if(e.touches&&e.touches.length)return e.touches[0].pageX;if(e.changedTouches&&e.changedTouches.length)return e.changedTouches[0].pageX;if(e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length)return e.originalEvent.touches[0].pageX;if(e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length)return e.originalEvent.touches[0].pageX}return null},this.mouseY=function(e){if(e){if(e.pageY)return e.pageY;if(e.clientY)return e.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);if(e.touches&&e.touches.length)return e.touches[0].pageY;if(e.changedTouches&&e.changedTouches.length)return e.changedTouches[0].pageY;if(e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length)return e.originalEvent.touches[0].pageY;if(e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length)return e.originalEvent.touches[0].pageY}return null}}};gj.widget.prototype.init=function(e,t){var a,r,n;for(a in this.attr("data-type",t),r=$.extend(!0,{},this.getHTMLConfig()||{}),$.extend(!0,r,e||{}),n=this.getConfig(r,t),this.attr("data-guid",n.guid),this.data(n),n)gj[t].events.hasOwnProperty(a)&&(this.on(a,n[a]),delete n[a]);for(plugin in gj[t].plugins)gj[t].plugins.hasOwnProperty(plugin)&&gj[t].plugins[plugin].configure(this,n,r);return this},gj.widget.prototype.getConfig=function(e,t){var a,r,n,i;for(i in a=$.extend(!0,{},gj[t].config.base),r=e.hasOwnProperty("uiLibrary")?e.uiLibrary:a.uiLibrary,gj[t].config[r]&&$.extend(!0,a,gj[t].config[r]),n=e.hasOwnProperty("iconsLibrary")?e.iconsLibrary:a.iconsLibrary,gj[t].config[n]&&$.extend(!0,a,gj[t].config[n]),gj[t].plugins)gj[t].plugins.hasOwnProperty(i)&&($.extend(!0,a,gj[t].plugins[i].config.base),gj[t].plugins[i].config[r]&&$.extend(!0,a,gj[t].plugins[i].config[r]),gj[t].plugins[i].config[n]&&$.extend(!0,a,gj[t].plugins[i].config[n]));return $.extend(!0,a,e),a.guid||(a.guid=this.generateGUID()),a},gj.widget.prototype.getHTMLConfig=function(){var e=this.data(),t=this[0].attributes;return t.width&&(e.width=t.width.value),t.height&&(e.height=t.height.value),t.value&&(e.value=t.value.value),t.align&&(e.align=t.align.value),e&&e.source&&(e.dataSource=e.source,delete e.source),e},gj.widget.prototype.createDoneHandler=function(){var e=this;return function(t){"string"==typeof t&&JSON&&(t=JSON.parse(t)),gj[e.data("type")].methods.render(e,t)}},gj.widget.prototype.createErrorHandler=function(){return function(e){e&&e.statusText&&"abort"!==e.statusText&&alert(e.statusText)}},gj.widget.prototype.reload=function(e){var t,a,r=this.data(),n=this.data("type");return void 0===r.dataSource&&gj[n].methods.useHtmlDataSource(this,r),$.extend(r.params,e),$.isArray(r.dataSource)?(a=gj[n].methods.filter(this),gj[n].methods.render(this,a)):"string"==typeof r.dataSource?(t={url:r.dataSource,data:r.params},this.xhr&&this.xhr.abort(),this.xhr=$.ajax(t).done(this.createDoneHandler()).fail(this.createErrorHandler())):"object"==typeof r.dataSource&&(r.dataSource.data||(r.dataSource.data={}),$.extend(r.dataSource.data,r.params),"json"===(t=$.extend(!0,{},r.dataSource)).dataType&&"object"==typeof t.data&&(t.data=JSON.stringify(t.data)),t.success||(t.success=this.createDoneHandler()),t.error||(t.error=this.createErrorHandler()),this.xhr&&this.xhr.abort(),this.xhr=$.ajax(t)),this},gj.documentManager={events:{},subscribeForEvent:function(e,t,a){if(gj.documentManager.events[e]&&0!==gj.documentManager.events[e].length){if(gj.documentManager.events[e][t])throw"Event "+e+' for widget with guid="'+t+'" is already attached.';gj.documentManager.events[e].push({widgetId:t,callback:a})}else gj.documentManager.events[e]=[{widgetId:t,callback:a}],$(document).on(e,gj.documentManager.executeCallbacks)},executeCallbacks:function(e){var t=gj.documentManager.events[e.type];if(t)for(var a=0;a<t.length;a++)t[a].callback(e)},unsubscribeForEvent:function(e,t){var a=!1,r=gj.documentManager.events[e];if(r)for(var n=0;n<r.length;n++)r[n].widgetId===t&&(r.splice(n,1),a=!0,0===r.length&&($(document).off(e),delete gj.documentManager.events[e]));if(!a)throw'The "'+e+'" for widget with guid="'+t+"\" can't be removed."}},gj.tree={plugins:{}},gj.tree.config={base:{params:{},autoLoad:!0,selectionType:"single",cascadeSelection:!1,dataSource:void 0,primaryKey:void 0,textField:"text",childrenField:"children",hasChildrenField:"hasChildren",imageCssClassField:"imageCssClass",imageUrlField:"imageUrl",imageHtmlField:"imageHtml",disabledField:"disabled",width:void 0,border:!1,uiLibrary:"materialdesign",iconsLibrary:"materialicons",autoGenId:1,autoGenFieldName:"autoId_b5497cc5-7ef3-49f5-a7dc-4a932e1aee4a",indentation:24,style:{wrapper:"gj-unselectable",list:"gj-list gj-list-md",item:void 0,active:"gj-list-md-active",leafIcon:void 0,border:"gj-tree-md-border"},icons:{expand:'<i class="gj-icon chevron-right" />',collapse:'<i class="gj-icon chevron-down" />'}},bootstrap:{style:{wrapper:"gj-unselectable gj-tree-bootstrap-3",list:"gj-list gj-list-bootstrap list-group",item:"list-group-item",active:"active",border:"gj-tree-bootstrap-border"},iconsLibrary:"glyphicons"},bootstrap4:{style:{wrapper:"gj-unselectable gj-tree-bootstrap-4",list:"gj-list gj-list-bootstrap",item:"list-group-item",active:"active",border:"gj-tree-bootstrap-border"},icons:{expand:'<i class="gj-icon plus" />',collapse:'<i class="gj-icon minus" />'}},materialicons:{style:{expander:"gj-tree-material-icons-expander"}},fontawesome:{style:{expander:"gj-tree-font-awesome-expander"},icons:{expand:'<i class="fa fa-plus" aria-hidden="true"></i>',collapse:'<i class="fa fa-minus" aria-hidden="true"></i>'}},glyphicons:{style:{expander:"gj-tree-glyphicons-expander"},icons:{expand:'<span class="glyphicon glyphicon-plus" />',collapse:'<span class="glyphicon glyphicon-minus" />'}}},gj.tree.events={initialized:function(e){e.triggerHandler("initialized")},dataBinding:function(e){e.triggerHandler("dataBinding")},dataBound:function(e){e.triggerHandler("dataBound")},select:function(e,t,a){return e.triggerHandler("select",[t,a])},unselect:function(e,t,a){return e.triggerHandler("unselect",[t,a])},expand:function(e,t,a){return e.triggerHandler("expand",[t,a])},collapse:function(e,t,a){return e.triggerHandler("collapse",[t,a])},enable:function(e,t){return e.triggerHandler("enable",[t])},disable:function(e,t){return e.triggerHandler("disable",[t])},destroying:function(e){return e.triggerHandler("destroying")},nodeDataBound:function(e,t,a,r){return e.triggerHandler("nodeDataBound",[t,a,r])}},gj.tree.methods={init:function(e){return gj.widget.prototype.init.call(this,e,"tree"),gj.tree.methods.initialize.call(this),this.data("autoLoad")&&this.reload(),this},initialize:function(){var e=this.data(),t=$('<ul class="'+e.style.list+'"/>');this.empty().addClass(e.style.wrapper).append(t),e.width&&this.width(e.width),e.border&&this.addClass(e.style.border),gj.tree.events.initialized(this)},useHtmlDataSource:function(e,t){t.dataSource=[]},render:function(e,t){var a;return t&&("string"==typeof t&&JSON&&(t=JSON.parse(t)),(a=e.data()).records=t,a.primaryKey||gj.tree.methods.genAutoId(a,a.records),gj.tree.methods.loadData(e)),e},filter:function(e){return e.data().dataSource},genAutoId:function(e,t){var a;for(a=0;a<t.length;a++)t[a][e.autoGenFieldName]=e.autoGenId++,t[a][e.childrenField]&&t[a][e.childrenField].length&&gj.tree.methods.genAutoId(e,t[a][e.childrenField])},loadData:function(e){var t,a=e.data("records"),r=e.children("ul");for(gj.tree.events.dataBinding(e),r.off().empty(),t=0;t<a.length;t++)gj.tree.methods.appendNode(e,r,a[t],1);gj.tree.events.dataBound(e)},appendNode:function(e,t,a,r,n){var i,o,d,l,s,c=e.data(),u=c.primaryKey?a[c.primaryKey]:a[c.autoGenFieldName];if(o=$('<li data-id="'+u+'" data-role="node" />').addClass(c.style.item),$wrapper=$('<div data-role="wrapper" />'),$expander=$('<span data-role="expander" data-mode="close"></span>').addClass(c.style.expander),$display=$('<span data-role="display">'+a[c.textField]+"</span>"),hasChildren=void 0!==a[c.hasChildrenField]&&"true"===a[c.hasChildrenField].toString().toLowerCase(),disabled=void 0!==a[c.disabledField]&&"true"===a[c.disabledField].toString().toLowerCase(),c.indentation&&$wrapper.append('<span data-role="spacer" style="width: '+c.indentation*(r-1)+'px;"></span>'),disabled?gj.tree.methods.disableNode(e,o):($expander.on("click",gj.tree.methods.expanderClickHandler(e)),$display.on("click",gj.tree.methods.displayClickHandler(e))),$wrapper.append($expander),$wrapper.append($display),o.append($wrapper),n?t.find("li:eq("+(n-1)+")").before(o):t.append(o),c.imageCssClassField&&a[c.imageCssClassField]?(l=$('<span data-role="image"><span class="'+a[c.imageCssClassField]+'"></span></span>')).insertBefore($display):c.imageUrlField&&a[c.imageUrlField]?((l=$('<span data-role="image"></span>')).insertBefore($display),(s=$('<img src="'+a[c.imageUrlField]+'"></img>')).attr("width",l.width()).attr("height",l.height()),l.append(s)):c.imageHtmlField&&a[c.imageHtmlField]&&(l=$('<span data-role="image">'+a[c.imageHtmlField]+"</span>")).insertBefore($display),a[c.childrenField]&&a[c.childrenField].length||hasChildren){if($expander.empty().append(c.icons.expand),d=$("<ul />").addClass(c.style.list).addClass("gj-hidden"),o.append(d),a[c.childrenField]&&a[c.childrenField].length)for(i=0;i<a[c.childrenField].length;i++)gj.tree.methods.appendNode(e,d,a[c.childrenField][i],r+1)}else c.style.leafIcon?$expander.addClass(c.style.leafIcon):$expander.html("&nbsp;");gj.tree.events.nodeDataBound(e,o,a.id,a)},expanderClickHandler:function(e){return function(t){var a=$(this),r=a.closest("li");"close"===a.attr("data-mode")?e.expand(r):e.collapse(r)}},expand:function(e,t,a){var r,n,i=t.find('>[data-role="wrapper"]>[data-role="expander"]'),o=e.data(),d=t.attr("data-id"),l=t.children("ul");if(!1!==gj.tree.events.expand(e,t,d)&&l&&l.length&&(l.show(),i.attr("data-mode","open"),i.empty().append(o.icons.collapse),a))for(r=t.find("ul>li"),n=0;n<r.length;n++)gj.tree.methods.expand(e,$(r[n]),a);return e},collapse:function(e,t,a){var r,n,i=t.find('>[data-role="wrapper"]>[data-role="expander"]'),o=e.data(),d=t.attr("data-id"),l=t.children("ul");if(!1!==gj.tree.events.collapse(e,t,d)&&l&&l.length&&(l.hide(),i.attr("data-mode","close"),i.empty().append(o.icons.expand),a))for(r=t.find("ul>li"),n=0;n<r.length;n++)gj.tree.methods.collapse(e,$(r[n]),a);return e},expandAll:function(e){var t,a=e.find("ul>li");for(t=0;t<a.length;t++)gj.tree.methods.expand(e,$(a[t]),!0);return e},collapseAll:function(e){var t,a=e.find("ul>li");for(t=0;t<a.length;t++)gj.tree.methods.collapse(e,$(a[t]),!0);return e},displayClickHandler:function(e){return function(t){var a=$(this).closest("li"),r=e.data().cascadeSelection;"true"===a.attr("data-selected")?gj.tree.methods.unselect(e,a,r):("single"===e.data("selectionType")&&gj.tree.methods.unselectAll(e),gj.tree.methods.select(e,a,r))}},selectAll:function(e){var t,a=e.find("ul>li");for(t=0;t<a.length;t++)gj.tree.methods.select(e,$(a[t]),!0);return e},select:function(e,t,a){var r,n,i=e.data();if("true"!==t.attr("data-selected")&&!1!==gj.tree.events.select(e,t,t.attr("data-id"))&&(t.addClass(i.style.active).attr("data-selected","true"),a))for(n=t.find("ul>li"),r=0;r<n.length;r++)gj.tree.methods.select(e,$(n[r]),a)},unselectAll:function(e){var t,a=e.find("ul>li");for(t=0;t<a.length;t++)gj.tree.methods.unselect(e,$(a[t]),!0);return e},unselect:function(e,t,a){var r,n;e.data();if("true"===t.attr("data-selected")&&!1!==gj.tree.events.unselect(e,t,t.attr("data-id"))&&(t.removeClass(e.data().style.active).removeAttr("data-selected"),a))for(n=t.find("ul>li"),r=0;r<n.length;r++)gj.tree.methods.unselect(e,$(n[r]),a)},getSelections:function(e){var t,a,r,n=[],i=e.children("li");if(i&&i.length)for(t=0;t<i.length;t++)"true"===(a=$(i[t])).attr("data-selected")?n.push(a.attr("data-id")):a.has("ul")&&(r=gj.tree.methods.getSelections(a.children("ul"))).length&&(n=n.concat(r));return n},getDataById:function(e,t,a){var r,n=e.data(),i=void 0;for(r=0;r<a.length;r++){if(n.primaryKey&&a[r][n.primaryKey]==t){i=a[r];break}if(a[r][n.autoGenFieldName]==t){i=a[r];break}if(a[r][n.childrenField]&&a[r][n.childrenField].length&&(i=gj.tree.methods.getDataById(e,t,a[r][n.childrenField])))break}return i},getDataByText:function(e,t,a){var r,n=void 0,i=e.data();for(r=0;r<a.length;r++){if(t===a[r][i.textField]){n=a[r];break}if(a[r][i.childrenField]&&a[r][i.childrenField].length&&(n=gj.tree.methods.getDataByText(e,t,a[r][i.childrenField])))break}return n},getNodeById:function(e,t){var a,r,n=void 0,i=e.children("li");if(i&&i.length)for(a=0;a<i.length;a++){if(t==(r=$(i[a])).attr("data-id")){n=r;break}if(r.has("ul")&&(n=gj.tree.methods.getNodeById(r.children("ul"),t)))break}return n},getNodeByText:function(e,t){var a,r,n=void 0,i=e.children("li");if(i&&i.length)for(a=0;a<i.length;a++){if(t===(r=$(i[a])).find('>[data-role="wrapper"]>[data-role="display"]').text()){n=r;break}if(r.has("ul")&&(n=gj.tree.methods.getNodeByText(r.children("ul"),t)))break}return n},addNode:function(e,t,a,r){var n,i,o=e.data();return a&&a.length?("li"===a[0].tagName.toLowerCase()&&(0===a.children("ul").length&&(a.find('[data-role="expander"]').empty().append(o.icons.collapse),a.append($("<ul />").addClass(o.style.list))),a=a.children("ul")),(i=e.getDataById(a.parent().data("id")))[o.childrenField]||(i[o.childrenField]=[]),i[o.childrenField].push(t)):(a=e.children("ul"),e.data("records").push(t)),n=a.parentsUntil('[data-type="tree"]',"ul").length+1,o.primaryKey||gj.tree.methods.genAutoId(o,[t]),gj.tree.methods.appendNode(e,a,t,n,r),e},remove:function(e,t){return gj.tree.methods.removeDataById(e,t.attr("data-id"),e.data("records")),t.remove(),e},removeDataById:function(e,t,a){var r,n=e.data();for(r=0;r<a.length;r++){if(n.primaryKey&&a[r][n.primaryKey]==t){a.splice(r,1);break}if(a[r][n.autoGenFieldName]==t){a.splice(r,1);break}a[r][n.childrenField]&&a[r][n.childrenField].length&&gj.tree.methods.removeDataById(e,t,a[r][n.childrenField])}},update:function(e,t,a){var r=e.data(),n=e.getNodeById(t);e.getDataById(t);return a,n.find('>[data-role="wrapper"]>[data-role="display"]').html(a[r.textField]),gj.tree.events.nodeDataBound(e,n,t,a),e},getChildren:function(e,t,a){var r,n,i=[];for(n=(a=void 0===a||a)?t.find("ul li"):t.find(">ul>li"),r=0;r<n.length;r++)i.push($(n[r]).data("id"));return i},enableAll:function(e){var t,a=e.find("ul>li");for(t=0;t<a.length;t++)gj.tree.methods.enableNode(e,$(a[t]),!0);return e},enableNode:function(e,t,a){var r,n,i=t.find('>[data-role="wrapper"]>[data-role="expander"]'),o=t.find('>[data-role="wrapper"]>[data-role="display"]');a=void 0===a||a;if(t.removeClass("disabled"),i.on("click",gj.tree.methods.expanderClickHandler(e)),o.on("click",gj.tree.methods.displayClickHandler(e)),gj.tree.events.enable(e,t),a)for(n=t.find("ul>li"),r=0;r<n.length;r++)gj.tree.methods.enableNode(e,$(n[r]),a)},disableAll:function(e){var t,a=e.find("ul>li");for(t=0;t<a.length;t++)gj.tree.methods.disableNode(e,$(a[t]),!0);return e},disableNode:function(e,t,a){var r,n,i=t.find('>[data-role="wrapper"]>[data-role="expander"]'),o=t.find('>[data-role="wrapper"]>[data-role="display"]');a=void 0===a||a;if(t.addClass("disabled"),i.off("click"),o.off("click"),gj.tree.events.disable(e,t),a)for(n=t.find("ul>li"),r=0;r<n.length;r++)gj.tree.methods.disableNode(e,$(n[r]),a)},destroy:function(e){return e.data()&&(gj.tree.events.destroying(e),e.xhr&&e.xhr.abort(),e.off(),e.removeData(),e.removeAttr("data-type"),e.removeClass().empty()),e},pathFinder:function(e,t,a,r){var n,i=!1;for(n=0;n<t.length;n++){if(t[n].id==a){i=!0;break}if(gj.tree.methods.pathFinder(e,t[n][e.childrenField],a,r)){r.push(t[n].data[e.textField]),i=!0;break}}return i}},gj.tree.widget=function(e,t){var a=gj.tree.methods;return this.reload=function(e){return gj.widget.prototype.reload.call(this,e)},this.render=function(e){return a.render(this,e)},this.addNode=function(e,t,r){return a.addNode(this,e,t,r)},this.removeNode=function(e){return a.remove(this,e)},this.updateNode=function(e,t){return a.update(this,e,t)},this.destroy=function(){return a.destroy(this)},this.expand=function(e,t){return a.expand(this,e,t)},this.collapse=function(e,t){return a.collapse(this,e,t)},this.expandAll=function(){return a.expandAll(this)},this.collapseAll=function(){return a.collapseAll(this)},this.getDataById=function(e){return a.getDataById(this,e,this.data("records"))},this.getDataByText=function(e){return a.getDataByText(this,e,this.data("records"))},this.getNodeById=function(e){return a.getNodeById(this.children("ul"),e)},this.getNodeByText=function(e){return a.getNodeByText(this.children("ul"),e)},this.getAll=function(){return this.data("records")},this.select=function(e){return a.select(this,e)},this.unselect=function(e){return a.unselect(this,e)},this.selectAll=function(){return a.selectAll(this)},this.unselectAll=function(){return a.unselectAll(this)},this.getSelections=function(){return a.getSelections(this.children("ul"))},this.getChildren=function(e,t){return a.getChildren(this,e,t)},this.parents=function(e){var t=[],r=this.data();return a.pathFinder(r,r.records,e,t),t.reverse()},this.enable=function(e,t){return a.enableNode(this,e,t)},this.enableAll=function(){return a.enableAll(this)},this.disable=function(e,t){return a.disableNode(this,e,t)},this.disableAll=function(){return a.disableAll(this)},$.extend(e,this),"tree"!==e.attr("data-type")&&a.init.call(e,t),e},gj.tree.widget.prototype=new gj.widget,gj.tree.widget.constructor=gj.tree.widget,jQuery.fn.tree=function(e){var t;if(this&&this.length){if("object"!=typeof e&&e){if((t=new gj.tree.widget(this,null))[e])return t[e].apply(this,Array.prototype.slice.call(arguments,1));throw"Method "+e+" does not exist."}return new gj.tree.widget(this,e)}},gj.tree.plugins.checkboxes={config:{base:{checkboxes:void 0,checkedField:"checked",cascadeCheck:!0}},private:{dataBound:function(e){var t;e.data("cascadeCheck")&&(t=e.find('li[data-role="node"]'),$.each(t,function(){var e=$(this),t=e.find('[data-role="checkbox"] input[type="checkbox"]').checkbox("state");"checked"===t&&(gj.tree.plugins.checkboxes.private.updateChildrenState(e,t),gj.tree.plugins.checkboxes.private.updateParentState(e,t))}))},nodeDataBound:function(e,t,a,r){var n,i,o,d,l;0===t.find('> [data-role="wrapper"] > [data-role="checkbox"]').length&&(n=e.data(),i=t.find('> [data-role="wrapper"] > [data-role="expander"]'),o=$('<input type="checkbox"/>'),d=$('<span data-role="checkbox"></span>').append(o),l=void 0!==r[n.disabledField]&&"true"===r[n.disabledField].toString().toLowerCase(),o=o.checkbox({uiLibrary:n.uiLibrary,iconsLibrary:n.iconsLibrary,change:function(a,n){gj.tree.plugins.checkboxes.events.checkboxChange(e,t,r,o.state())}}),l&&o.prop("disabled",!0),r[n.checkedField]&&o.state("checked"),o.on("click",function(e){var t=o.closest("li"),a=o.state();n.cascadeCheck&&(gj.tree.plugins.checkboxes.private.updateChildrenState(t,a),gj.tree.plugins.checkboxes.private.updateParentState(t,a))}),i.after(d))},updateParentState:function(e,t){var a,r,n,i,o,d;1===(a=e.parent("ul").parent("li")).length&&(r=e.parent("ul").parent("li").find('> [data-role="wrapper"] > [data-role="checkbox"] input[type="checkbox"]'),n=e.siblings().find('> [data-role="wrapper"] > span[data-role="checkbox"] input[type="checkbox"]'),i="checked"===t,o="unchecked"===t,d="indeterminate",$.each(n,function(){var e=$(this).checkbox("state");i&&"checked"!==e&&(i=!1),o&&"unchecked"!==e&&(o=!1)}),i&&!o&&(d="checked"),!i&&o&&(d="unchecked"),r.checkbox("state",d),gj.tree.plugins.checkboxes.private.updateParentState(a,r.checkbox("state")))},updateChildrenState:function(e,t){var a=e.find('ul li [data-role="wrapper"] [data-role="checkbox"] input[type="checkbox"]');a.length>0&&$.each(a,function(){$(this).checkbox("state",t)})},update:function(e,t,a){var r=t.find('[data-role="checkbox"] input[type="checkbox"]').first();$(r).checkbox("state",a),e.data().cascadeCheck&&(gj.tree.plugins.checkboxes.private.updateChildrenState(t,a),gj.tree.plugins.checkboxes.private.updateParentState(t,a))}},public:{getCheckedNodes:function(){var e=[],t=this.find('li [data-role="checkbox"] input[type="checkbox"]');return $.each(t,function(){var t=$(this);"checked"===t.checkbox("state")&&e.push(t.closest("li").data("id"))}),e},checkAll:function(){var e=this.find('li [data-role="checkbox"] input[type="checkbox"]');return $.each(e,function(){$(this).checkbox("state","checked")}),this},uncheckAll:function(){var e=this.find('li [data-role="checkbox"] input[type="checkbox"]');return $.each(e,function(){$(this).checkbox("state","unchecked")}),this},check:function(e){return gj.tree.plugins.checkboxes.private.update(this,e,"checked"),this},uncheck:function(e){return gj.tree.plugins.checkboxes.private.update(this,e,"unchecked"),this}},events:{checkboxChange:function(e,t,a,r){return e.triggerHandler("checkboxChange",[t,a,r])}},configure:function(e){e.data("checkboxes")&&gj.checkbox&&($.extend(!0,e,gj.tree.plugins.checkboxes.public),e.on("nodeDataBound",function(t,a,r,n){gj.tree.plugins.checkboxes.private.nodeDataBound(e,a,r,n)}),e.on("dataBound",function(){gj.tree.plugins.checkboxes.private.dataBound(e)}),e.on("enable",function(e,t){t.find('>[data-role="wrapper"]>[data-role="checkbox"] input[type="checkbox"]').prop("disabled",!1)}),e.on("disable",function(e,t){t.find('>[data-role="wrapper"]>[data-role="checkbox"] input[type="checkbox"]').prop("disabled",!0)}))}},gj.tree.plugins.dragAndDrop={config:{base:{dragAndDrop:void 0,style:{dragEl:"gj-tree-drag-el gj-tree-md-drag-el",dropAsChildIcon:"gj-cursor-pointer gj-icon plus",dropAbove:"gj-tree-drop-above",dropBelow:"gj-tree-drop-below"}},bootstrap:{style:{dragEl:"gj-tree-drag-el gj-tree-bootstrap-drag-el",dropAsChildIcon:"glyphicon glyphicon-plus",dropAbove:"drop-above",dropBelow:"drop-below"}},bootstrap4:{style:{dragEl:"gj-tree-drag-el gj-tree-bootstrap-drag-el",dropAsChildIcon:"gj-cursor-pointer gj-icon plus",dropAbove:"drop-above",dropBelow:"drop-below"}}},private:{nodeDataBound:function(e,t){var a=t.children('[data-role="wrapper"]'),r=t.find('>[data-role="wrapper"]>[data-role="display"]');a.length&&r.length&&(r.on("mousedown",gj.tree.plugins.dragAndDrop.private.createNodeMouseDownHandler(e)),r.on("mousemove",gj.tree.plugins.dragAndDrop.private.createNodeMouseMoveHandler(e,t,r)),r.on("mouseup",gj.tree.plugins.dragAndDrop.private.createNodeMouseUpHandler(e)))},createNodeMouseDownHandler:function(e){return function(t){e.data("dragReady",!0)}},createNodeMouseUpHandler:function(e){return function(t){e.data("dragReady",!1)}},createNodeMouseMoveHandler:function(e,t,a){return function(r){if(e.data("dragReady")){var n,i,o,d,l=e.data();e.data("dragReady",!1),n=a.clone().wrap('<div data-role="wrapper"/>').closest("div").wrap('<li class="'+l.style.item+'" />').closest("li").wrap('<ul class="'+l.style.list+'" />').closest("ul"),$("body").append(n),n.attr("data-role","draggable-clone").addClass("gj-unselectable").addClass(l.style.dragEl),n.find('[data-role="wrapper"]').prepend('<span data-role="indicator" />'),n.draggable({drag:gj.tree.plugins.dragAndDrop.private.createDragHandler(e,t,a),stop:gj.tree.plugins.dragAndDrop.private.createDragStopHandler(e,t,a)}),i=a.parent(),o=a.offset().top,o-=parseInt(i.css("border-top-width"))+parseInt(i.css("margin-top"))+parseInt(i.css("padding-top")),d=a.offset().left,d-=parseInt(i.css("border-left-width"))+parseInt(i.css("margin-left"))+parseInt(i.css("padding-left")),d-=n.find('[data-role="indicator"]').outerWidth(!0),n.css({position:"absolute",top:o,left:d,width:a.outerWidth(!0)}),"true"===a.attr("data-droppable")&&a.droppable("destroy"),gj.tree.plugins.dragAndDrop.private.getTargetDisplays(e,t,a).each(function(){var e=$(this);"true"===e.attr("data-droppable")&&e.droppable("destroy"),e.droppable()}),gj.tree.plugins.dragAndDrop.private.getTargetDisplays(e,t).each(function(){var e=$(this);"true"===e.attr("data-droppable")&&e.droppable("destroy"),e.droppable()}),n.trigger("mousedown")}}},getTargetDisplays:function(e,t,a){return e.find('[data-role="display"]').not(a).not(t.find('[data-role="display"]'))},getTargetWrappers:function(e,t){return e.find('[data-role="wrapper"]').not(t.find('[data-role="wrapper"]'))},createDragHandler:function(e,t,a){var r=gj.tree.plugins.dragAndDrop.private.getTargetDisplays(e,t,a),n=gj.tree.plugins.dragAndDrop.private.getTargetWrappers(e,t),i=e.data();return function(e,t,a){var o=$(this),d=!1;r.each(function(){var e;if($(this).droppable("isOver",a))return e=o.find('[data-role="indicator"]'),i.style.dropAsChildIcon?e.addClass(i.style.dropAsChildIcon):e.text("+"),d=!0,!1;o.find('[data-role="indicator"]').removeClass(i.style.dropAsChildIcon).empty()}),n.each(function(){var e,t=$(this);!d&&t.droppable("isOver",a)?(e=t.position().top+t.outerHeight()/2,a.y<e?t.addClass(i.style.dropAbove).removeClass(i.style.dropBelow):t.addClass(i.style.dropBelow).removeClass(i.style.dropAbove)):t.removeClass(i.style.dropAbove).removeClass(i.style.dropBelow)})}},createDragStopHandler:function(e,t,a){var r=gj.tree.plugins.dragAndDrop.private.getTargetDisplays(e,t,a),n=gj.tree.plugins.dragAndDrop.private.getTargetWrappers(e,t),i=e.data();return function(a,o){var d,l,s,c,u=!1;$(this).draggable("destroy").remove(),r.each(function(){var a,r=$(this);if(r.droppable("isOver",o))return l=r.closest("li"),s=t.parent("ul").parent("li"),0===(a=l.children("ul")).length&&(a=$("<ul />").addClass(i.style.list),l.append(a)),!1!==gj.tree.plugins.dragAndDrop.events.nodeDrop(e,t.data("id"),l.data("id"),a.children("li").length+1)&&(a.append(t),d=e.getDataById(t.data("id")),gj.tree.methods.removeDataById(e,t.data("id"),i.records),void 0===(c=e.getDataById(a.parent().data("id")))[i.childrenField]&&(c[i.childrenField]=[]),c[i.childrenField].push(d),gj.tree.plugins.dragAndDrop.private.refresh(e,t,l,s)),u=!0,!1;r.droppable("destroy")}),u||n.each(function(){var a,r,n,c=$(this);if(c.droppable("isOver",o))return l=c.closest("li"),s=t.parent("ul").parent("li"),a=o.y<c.position().top+c.outerHeight()/2,n=t.data("id"),r=l.prevAll('li:not([data-id="'+n+'"])').length+(a?1:2),!1!==gj.tree.plugins.dragAndDrop.events.nodeDrop(e,n,l.parent("ul").parent("li").data("id"),r)&&(d=e.getDataById(t.data("id")),gj.tree.methods.removeDataById(e,t.data("id"),i.records),e.getDataById(l.parent().data("id"))[i.childrenField].splice(l.index()+(a?0:1),0,d),a?t.insertBefore(l):t.insertAfter(l),gj.tree.plugins.dragAndDrop.private.refresh(e,t,l,s)),!1;c.droppable("destroy")})}},refresh:function(e,t,a,r){var n=e.data();gj.tree.plugins.dragAndDrop.private.refreshNode(e,a),gj.tree.plugins.dragAndDrop.private.refreshNode(e,r),gj.tree.plugins.dragAndDrop.private.refreshNode(e,t),t.find('li[data-role="node"]').each(function(){gj.tree.plugins.dragAndDrop.private.refreshNode(e,$(this))}),a.children('[data-role="wrapper"]').removeClass(n.style.dropAbove).removeClass(n.style.dropBelow)},refreshNode:function(e,t){var a=t.children('[data-role="wrapper"]'),r=a.children('[data-role="expander"]'),n=a.children('[data-role="spacer"]'),i=t.children("ul"),o=e.data(),d=t.parentsUntil('[data-type="tree"]',"ul").length;i.length&&i.children().length?i.is(":visible")?r.empty().append(o.icons.collapse):r.empty().append(o.icons.expand):r.empty(),a.removeClass(o.style.dropAbove).removeClass(o.style.dropBelow),n.css("width",o.indentation*(d-1))}},public:{},events:{nodeDrop:function(e,t,a,r){return e.triggerHandler("nodeDrop",[t,a,r])}},configure:function(e){$.extend(!0,e,gj.tree.plugins.dragAndDrop.public),e.data("dragAndDrop")&&gj.draggable&&gj.droppable&&e.on("nodeDataBound",function(t,a){gj.tree.plugins.dragAndDrop.private.nodeDataBound(e,a)})}},gj.tree.plugins.lazyLoading={config:{base:{paramNames:{parentId:"parentId"},lazyLoading:!1}},private:{nodeDataBound:function(e,t,a,r){var n=e.data(),i=t.find('> [data-role="wrapper"] > [data-role="expander"]');r.hasChildren&&i.empty().append(n.icons.expand)},createDoneHandler:function(e,t){return function(a){var r,n,i,o=e.data();if("string"==typeof a&&JSON&&(a=JSON.parse(a)),a&&a.length){for(0===(i=t.children("ul")).length&&(i=$("<ul />").addClass(o.style.list),t.append(i)),r=0;r<a.length;r++)e.addNode(a[r],i);(n=t.find('>[data-role="wrapper"]>[data-role="expander"]')).attr("data-mode","open"),n.empty().append(o.icons.collapse),gj.tree.events.dataBound(e)}}},expand:function(e,t,a){var r,n=e.data(),i={},o=t.find(">ul>li");o&&o.length||"string"==typeof n.dataSource&&(i[n.paramNames.parentId]=a,r={url:n.dataSource,data:i},e.xhr&&e.xhr.abort(),e.xhr=$.ajax(r).done(gj.tree.plugins.lazyLoading.private.createDoneHandler(e,t)).fail(e.createErrorHandler()))}},public:{},events:{},configure:function(e,t,a){a.lazyLoading&&(e.on("nodeDataBound",function(t,a,r,n){gj.tree.plugins.lazyLoading.private.nodeDataBound(e,a,r,n)}),e.on("expand",function(t,a,r){gj.tree.plugins.lazyLoading.private.expand(e,a,r)}))}},gj.checkbox={plugins:{}},gj.checkbox.config={base:{uiLibrary:"materialdesign",iconsLibrary:"materialicons",style:{wrapperCssClass:"gj-checkbox-md",spanCssClass:void 0}},bootstrap:{style:{wrapperCssClass:"gj-checkbox-bootstrap"},iconsLibrary:"glyphicons"},bootstrap4:{style:{wrapperCssClass:"gj-checkbox-bootstrap gj-checkbox-bootstrap-4"},iconsLibrary:"materialicons"},materialicons:{style:{iconsCssClass:"gj-checkbox-material-icons",spanCssClass:"gj-icon"}},glyphicons:{style:{iconsCssClass:"gj-checkbox-glyphicons",spanCssClass:""}},fontawesome:{style:{iconsCssClass:"gj-checkbox-fontawesome",spanCssClass:"fa"}}},gj.checkbox.methods={init:function(e){return gj.widget.prototype.init.call(this,e,"checkbox"),this.attr("data-checkbox","true"),gj.checkbox.methods.initialize(this),this},initialize:function(e){var t,a,r=e.data();r.style.wrapperCssClass&&(t=$('<label class="'+r.style.wrapperCssClass+" "+r.style.iconsCssClass+'"></label>'),e.attr("id")&&t.attr("for",e.attr("id")),e.wrap(t),a=$("<span />"),r.style.spanCssClass&&a.addClass(r.style.spanCssClass),e.parent().append(a))},state:function(e,t){return t?("checked"===t?(e.prop("indeterminate",!1),e.prop("checked",!0)):"unchecked"===t?(e.prop("indeterminate",!1),e.prop("checked",!1)):"indeterminate"===t&&(e.prop("checked",!0),e.prop("indeterminate",!0)),gj.checkbox.events.change(e,t),e):t=e.prop("indeterminate")?"indeterminate":e.prop("checked")?"checked":"unchecked"},toggle:function(e){return"checked"==e.state()?e.state("unchecked"):e.state("checked"),e},destroy:function(e){return"true"===e.attr("data-checkbox")&&(e.removeData(),e.removeAttr("data-guid"),e.removeAttr("data-checkbox"),e.off(),e.next("span").remove(),e.unwrap()),e}},gj.checkbox.events={change:function(e,t){return e.triggerHandler("change",[t])}},gj.checkbox.widget=function(e,t){var a=gj.checkbox.methods;return this.toggle=function(){return a.toggle(this)},this.state=function(e){return a.state(this,e)},this.destroy=function(){return a.destroy(this)},$.extend(e,this),"true"!==e.attr("data-checkbox")&&a.init.call(e,t),e},gj.checkbox.widget.prototype=new gj.widget,gj.checkbox.widget.constructor=gj.checkbox.widget,jQuery.fn.checkbox=function(e){var t;if(this&&this.length){if("object"!=typeof e&&e){if((t=new gj.checkbox.widget(this,null))[e])return t[e].apply(this,Array.prototype.slice.call(arguments,1));throw"Method "+e+" does not exist."}return new gj.checkbox.widget(this,e)}},gj.editor={plugins:{},messages:{}},gj.editor.config={base:{height:300,width:void 0,uiLibrary:"materialdesign",iconsLibrary:"materialicons",locale:"en-us",buttons:void 0,style:{wrapper:"gj-editor gj-editor-md",buttonsGroup:"gj-button-md-group",button:"gj-button-md",buttonActive:"active"}},bootstrap:{style:{wrapper:"gj-editor gj-editor-bootstrap",buttonsGroup:"btn-group",button:"btn btn-default gj-cursor-pointer",buttonActive:"active"}},bootstrap4:{style:{wrapper:"gj-editor gj-editor-bootstrap",buttonsGroup:"btn-group",button:"btn btn-outline-secondary gj-cursor-pointer",buttonActive:"active"}},materialicons:{icons:{bold:'<i class="gj-icon bold" />',italic:'<i class="gj-icon italic" />',strikethrough:'<i class="gj-icon strikethrough" />',underline:'<i class="gj-icon underlined" />',listBulleted:'<i class="gj-icon list-bulleted" />',listNumbered:'<i class="gj-icon list-numbered" />',indentDecrease:'<i class="gj-icon indent-decrease" />',indentIncrease:'<i class="gj-icon indent-increase" />',alignLeft:'<i class="gj-icon align-left" />',alignCenter:'<i class="gj-icon align-center" />',alignRight:'<i class="gj-icon align-right" />',alignJustify:'<i class="gj-icon align-justify" />',undo:'<i class="gj-icon undo" />',redo:'<i class="gj-icon redo" />'}},fontawesome:{icons:{bold:'<i class="fa fa-bold" aria-hidden="true"></i>',italic:'<i class="fa fa-italic" aria-hidden="true"></i>',strikethrough:'<i class="fa fa-strikethrough" aria-hidden="true"></i>',underline:'<i class="fa fa-underline" aria-hidden="true"></i>',listBulleted:'<i class="fa fa-list-ul" aria-hidden="true"></i>',listNumbered:'<i class="fa fa-list-ol" aria-hidden="true"></i>',indentDecrease:'<i class="fa fa-indent" aria-hidden="true"></i>',indentIncrease:'<i class="fa fa-outdent" aria-hidden="true"></i>',alignLeft:'<i class="fa fa-align-left" aria-hidden="true"></i>',alignCenter:'<i class="fa fa-align-center" aria-hidden="true"></i>',alignRight:'<i class="fa fa-align-right" aria-hidden="true"></i>',alignJustify:'<i class="fa fa-align-justify" aria-hidden="true"></i>',undo:'<i class="fa fa-undo" aria-hidden="true"></i>',redo:'<i class="fa fa-repeat" aria-hidden="true"></i>'}}},gj.editor.methods={init:function(e){return gj.widget.prototype.init.call(this,e,"editor"),this.attr("data-editor","true"),gj.editor.methods.initialize(this),this},initialize:function(e){var t,a,r,n,i,o=this,d=e.data();if(e.hide(),"wrapper"!==e[0].parentElement.attributes.role&&((r=document.createElement("div")).setAttribute("role","wrapper"),e[0].parentNode.insertBefore(r,e[0]),r.appendChild(e[0])),gj.editor.methods.localization(d),$(r).addClass(d.style.wrapper),d.width&&$(r).width(d.width),0===(n=$(r).children('div[role="body"]')).length&&(n=$('<div role="body"></div>'),$(r).append(n),e[0].innerText&&(n[0].innerHTML=e[0].innerText)),n.attr("contenteditable",!0),n.on("keydown",function(t){var a=event.keyCode||event.charCode;!1===gj.editor.events.changing(e)&&8!==a&&46!==a&&t.preventDefault()}),n.on("mouseup keyup mouseout cut paste",function(t){o.updateToolbar(e,i),gj.editor.events.changed(e),e.html(n.html())}),0===(i=$(r).children('div[role="toolbar"]')).length)for(var l in i=$('<div role="toolbar"></div>'),n.before(i),d.buttons){for(var s in t=$("<div />").addClass(d.style.buttonsGroup),d.buttons[l])(a=$(d.buttons[l][s])).on("click",function(){gj.editor.methods.executeCmd(e,n,i,$(this))}),t.append(a);i.append(t)}n.height(d.height-gj.core.height(i[0],!0))},localization:function(e){var t=gj.editor.messages[e.locale];void 0===e.buttons&&(e.buttons=[['<button type="button" class="'+e.style.button+'" title="'+t.bold+'" role="bold">'+e.icons.bold+"</button>",'<button type="button" class="'+e.style.button+'" title="'+t.italic+'" role="italic">'+e.icons.italic+"</button>",'<button type="button" class="'+e.style.button+'" title="'+t.strikethrough+'" role="strikethrough">'+e.icons.strikethrough+"</button>",'<button type="button" class="'+e.style.button+'" title="'+t.underline+'" role="underline">'+e.icons.underline+"</button>"],['<button type="button" class="'+e.style.button+'" title="'+t.listBulleted+'" role="insertunorderedlist">'+e.icons.listBulleted+"</button>",'<button type="button" class="'+e.style.button+'" title="'+t.listNumbered+'" role="insertorderedlist">'+e.icons.listNumbered+"</button>",'<button type="button" class="'+e.style.button+'" title="'+t.indentDecrease+'" role="outdent">'+e.icons.indentDecrease+"</button>",'<button type="button" class="'+e.style.button+'" title="'+t.indentIncrease+'" role="indent">'+e.icons.indentIncrease+"</button>"],['<button type="button" class="'+e.style.button+'" title="'+t.alignLeft+'" role="justifyleft">'+e.icons.alignLeft+"</button>",'<button type="button" class="'+e.style.button+'" title="'+t.alignCenter+'" role="justifycenter">'+e.icons.alignCenter+"</button>",'<button type="button" class="'+e.style.button+'" title="'+t.alignRight+'" role="justifyright">'+e.icons.alignRight+"</button>",'<button type="button" class="'+e.style.button+'" title="'+t.alignJustify+'" role="justifyfull">'+e.icons.alignJustify+"</button>"],['<button type="button" class="'+e.style.button+'" title="'+t.undo+'" role="undo">'+e.icons.undo+"</button>",'<button type="button" class="'+e.style.button+'" title="'+t.redo+'" role="redo">'+e.icons.redo+"</button>"]])},updateToolbar:function(e,t){var a=e.data();$buttons=t.find("[role]").each(function(){var e=$(this),t=e.attr("role");t&&document.queryCommandEnabled(t)&&"true"===document.queryCommandValue(t)?e.addClass(a.style.buttonActive):e.removeClass(a.style.buttonActive)})},executeCmd:function(e,t,a,r){t.focus(),document.execCommand(r.attr("role"),!1),gj.editor.methods.updateToolbar(e,a)},content:function(e,t){var a=e.parent().children('div[role="body"]');return void 0===t?a.html():a.html(t)},destroy:function(e){var t;return"true"===e.attr("data-editor")&&((t=e.parent()).children('div[role="body"]').remove(),t.children('div[role="toolbar"]').remove(),e.unwrap(),e.removeData(),e.removeAttr("data-guid"),e.removeAttr("data-editor"),e.off(),e.show()),e}},gj.editor.events={changing:function(e){return e.triggerHandler("changing")},changed:function(e){return e.triggerHandler("changed")}},gj.editor.widget=function(e,t){var a=gj.editor.methods;return this.content=function(e){return a.content(this,e)},this.destroy=function(){return a.destroy(this)},$.extend(e,this),"true"!==e.attr("data-editor")&&a.init.call(e,t),e},gj.editor.widget.prototype=new gj.widget,gj.editor.widget.constructor=gj.editor.widget,jQuery.fn.editor=function(e){var t;if(this&&this.length){if("object"!=typeof e&&e){if((t=new gj.editor.widget(this,null))[e])return t[e].apply(this,Array.prototype.slice.call(arguments,1));throw"Method "+e+" does not exist."}return new gj.editor.widget(this,e)}},gj.editor.messages["en-us"]={bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",listBulleted:"List Bulleted",listNumbered:"List Numbered",indentDecrease:"Indent Decrease",indentIncrease:"Indent Increase",alignLeft:"Align Left",alignCenter:"Align Center",alignRight:"Align Right",alignJustify:"Align Justify",undo:"Undo",redo:"Redo"};